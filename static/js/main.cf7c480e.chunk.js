(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(22)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(3),o=a.n(s),c=(a(16),a(7)),i=a(1),l=a(4),u=a(5),h=a(8),m=a(6),y=a(9),v=(a(18),[[0,1,0,0],[0,1,0,1],[0,1,1,1],[0,0,1,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,0,1,1],[0,1,1,0],[0,1,0,0],[0,1,0,1],[0,0,1,1],[0,1,1,1],[0,1,1,0],[0,1,0,1],[0,1,1,0],[1,1,0,1],[1,0,1,0],[1,1,0,0],[0,0,0,1],[1,1,1,0],[1,0,0,1],[0,0,1,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,0,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[0,1,0,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[1,0,1,0],[1,0,0,1],[0,0,1,1],[0,1,1,0],[1,0,0,1],[0,1,1,1],[0,1,1,0],[0,1,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,1],[0,1,1,0],[1,0,0,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,1,1,0],[0,0,0,1],[0,0,1,1],[1,0,1,1],[0,1,1,0],[1,0,0,0],[1,1,0,0],[1,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[0,1,1,0],[1,1,0,0],[1,1,0,0],[0,1,0,0],[1,1,0,0],[0,1,0,1],[0,1,1,0],[0,1,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[1,1,0,0],[1,0,0,1],[0,1,1,0],[1,1,0,0],[0,1,0,1],[0,1,1,0],[1,1,0,0],[0,1,0,0],[0,1,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,1,0,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,0,0,1],[0,1,1,0],[1,1,0,0],[1,1,0,0],[1,0,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[1,0,1,0],[0,1,0,1],[1,1,1,0],[1,0,0,1],[0,0,1,1],[1,0,1,0],[1,0,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,1],[0,0,1,1],[1,0,1,1],[0,0,1,1],[0,0,1,0],[0,1,0,1],[1,0,1,0],[1,0,0,0],[0,1,0,1],[0,1,1,0],[0,1,0,0],[0,1,0,1],[0,1,1,0],[1,1,0,1],[0,0,1,1],[1,0,1,0],[1,1,0,1],[0,0,1,1],[0,0,1,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[1,1,0,0],[1,1,0,1],[1,0,1,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,1,1,0],[1,0,0,0],[0,1,0,1],[0,0,1,1],[1,1,1,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[0,0,1,0],[1,0,0,1],[0,1,1,1],[0,1,1,0],[1,1,0,0],[0,1,0,1],[1,0,1,0],[0,1,0,0],[1,1,0,0],[1,1,0,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[1,0,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[1,1,0,0],[0,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,1,0,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,1,1,1],[0,1,1,0],[0,1,0,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,0],[1,1,0,0],[1,1,0,0],[0,0,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[0,1,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[0,1,0,1],[0,0,1,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[1,0,1,0],[1,0,0,1],[0,1,1,0],[0,1,0,1],[1,1,1,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[1,0,0,1],[1,0,1,0],[0,1,0,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[1,0,1,1],[1,0,1,0],[1,0,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[1,0,1,1],[1,0,1,0]]),f=(a(20),function(){return r.a.createElement("div",{className:"map"},v.map(function(e,t){return r.a.createElement("div",{key:t,className:"block",style:{borderTopColor:e[0]?"transparent":"white",borderBottomColor:e[1]?"transparent":"white",borderLeftColor:e[2]?"transparent":"white",borderRightColor:e[3]?"transparent":"white"}})}))}),k=5,d={START:"START",GAME_OVER:"GAME_OVER",AUTO:"AUTO",FLAG:"FLAG"},p="Dungeons v1.0.1",E="FLAG{Dungeons_1s_5o_3vil}";var x=function(e){var t=e.score,a=e.auto,n=e.hp,s=e.status;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"left"},r.a.createElement("div",null,"Score"),r.a.createElement("div",null,function(e){return String(e).length<5?Array(5-String(e).length).fill().map(function(e){return"0"}).join("")+e:e}(t))),r.a.createElement("div",{className:"right"},r.a.createElement("div",null,"HP"),r.a.createElement("div",null,Array(n).fill().map(function(e){return"x"}))),r.a.createElement("div",null,a?"".concat(p," (auto)"):p),r.a.createElement("div",null,function(e){switch(e){case d.GAME_OVER:return"Game Over";case d.FLAG:return E;default:return""}}(s)))},b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={player:{x:Math.floor(8*Math.random()),y:Math.floor(8*Math.random())},monster:{x:Math.floor(8*Math.random())+8,y:Math.floor(8*Math.random())+8},items:[],key:"",score:0,hp:k,status:d.START,auto:!1},a.changeKey=function(e){var t=e.key;"r"===t&&a.state.status!==d.GAME_OVER&&(a.state.auto?(a.noauto(),a.setState({auto:!1})):(a.auto(),a.setState({auto:!0}))),a.state.auto||("Enter"===t?(a.action(),a.setState({key:""})):"wsadefq".includes(t)&&a.setState({key:t}))},a.autoAction=function(){a.movePlayerAuto(),a.moveMonster(),a.actionAuto()},a.auto=function(){a.interval=setInterval(a.autoAction,10)},a.noauto=function(){clearInterval(a.interval)},a}return Object(y.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.changeKey)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval),this.clearListener()}},{key:"clearListener",value:function(){window.removeEventListener("keypress",this.changeKey)}},{key:"action",value:function(){switch(this.monsterAttack(),this.state.key){case"e":this.pick();break;case"f":this.attack();break;case"w":case"s":case"a":case"d":this.movePlayer()}this.moveMonster(),this.checkScore()}},{key:"monsterAttack",value:function(){var e=this.state,t=e.hp,a=e.monster,n=e.player,r=e.key;a.x===n.x&&a.y===n.y&&"f"!==r&&(t>2?this.setState({hp:t-2}):(this.setState({hp:0,status:d.GAME_OVER}),this.clearListener()))}},{key:"moveMonster",value:function(){var e=w(this.state.monster,0,42,this.state.player,5);e&&this.setState({monster:e})}},{key:"movePlayer",value:function(){var e=this.state,t=e.player,a=e.key,n=Object(i.a)({},t),r="wsad".indexOf(a);if(!M(n,r))return alert("Boom!");switch(r){case 0:n.y-=1;break;case 1:n.y+=1;break;case 2:n.x-=1;break;case 3:n.x+=1}this.setState({player:n})}},{key:"movePlayerAuto",value:function(){var e=w(this.state.player,0,42,this.state.monster,999);this.setState({player:e})}},{key:"actionAuto",value:function(){var e=this.state,t=e.player,a=e.monster;t.x===a.x&&t.y===a.y&&(this.attack(),this.pick())}},{key:"attack",value:function(){var e=this.state,t=e.monster,a=e.player,n=e.score,r=e.items;a.x===t.x&&a.y===t.y?this.setState({monster:{x:Math.floor(16*Math.random()),y:Math.floor(16*Math.random())},items:[].concat(Object(c.a)(r),[Object(i.a)({},a)]),score:n+1},this.checkScore):alert("Boom!")}},{key:"checkScore",value:function(){100===this.state.score&&this.setState({status:d.FLAG})}},{key:"pick",value:function(){var e=this.state,t=e.items,a=e.player,n=e.hp,r=-1;t.forEach(function(e,t){var n=e.x,s=e.y;n===a.x&&s===a.y&&(r=t)}),-1!==r?this.setState({items:t.filter(function(e,t){return t!==r}),hp:n<=k?k:n+1}):alert("Boom!")}},{key:"renderItems",value:function(){return this.state.items.map(function(e,t){return r.a.createElement(A,Object.assign({key:t},e,{c:"i"}))})}},{key:"renderMonster",value:function(){var e=this.state,t=e.player,a=e.monster,n="M";return t.x===a.x&&t.y===a.y&&(n="B"),r.a.createElement(A,Object.assign({c:n},a))}},{key:"renderPlayer",value:function(){var e=this.state,t=e.player,a="O";return e.items.find(function(e){return e.x===t.x&&e.y===t.y})&&(a="G"),r.a.createElement(A,Object.assign({c:a},t))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App",ref:function(t){return e.game=t}},r.a.createElement(x,this.state),this.renderItems(),this.renderPlayer(),this.renderMonster(),r.a.createElement(f,null),r.a.createElement("div",{className:"key"},"[>] action: ".concat(this.state.key)))}}]),t}(n.Component),A=function(e){var t=e.x,a=e.y,n=e.c;return r.a.createElement("div",{style:{transform:"translate(".concat(50*t,"px,").concat(50*a,"px)")},className:"item"},n)};function M(e,t){return!!v[e.x+16*e.y][t]}function w(e,t,a,n,r){if(t===r)return!1;if(n.x===e.x&&n.y===e.y)return e;for(var s=0;s<4;s++)if((1^a)!==s&&M(e,s)){var o=Object(i.a)({},e);switch(s){case 0:o.y-=1;break;case 1:o.y+=1;break;case 2:o.x-=1;break;case 3:o.x+=1}if(w(o,t+1,s,n,r))return o}return!1}var O=b;o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.cf7c480e.chunk.js.map