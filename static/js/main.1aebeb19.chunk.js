(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(22)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(3),i=a.n(s),c=(a(16),a(7)),o=a(1),l=a(4),h=a(5),u=a(8),m=a(6),y=a(9),f=(a(18),[[0,1,0,0],[0,1,0,1],[0,1,1,1],[0,0,1,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,0,1,1],[0,1,1,0],[0,1,0,0],[0,1,0,1],[0,0,1,1],[0,1,1,1],[0,1,1,0],[0,1,0,1],[0,1,1,0],[1,1,0,1],[1,0,1,0],[1,1,0,0],[0,0,0,1],[1,1,1,0],[1,0,0,1],[0,0,1,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,0,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[0,1,0,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[1,0,1,0],[1,0,0,1],[0,0,1,1],[0,1,1,0],[1,0,0,1],[0,1,1,1],[0,1,1,0],[0,1,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,1],[0,1,1,0],[1,0,0,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,1,1,0],[0,0,0,1],[0,0,1,1],[1,0,1,1],[0,1,1,0],[1,0,0,0],[1,1,0,0],[1,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[0,1,1,0],[1,1,0,0],[1,1,0,0],[0,1,0,0],[1,1,0,0],[0,1,0,1],[0,1,1,0],[0,1,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[1,1,0,0],[1,0,0,1],[0,1,1,0],[1,1,0,0],[0,1,0,1],[0,1,1,0],[1,1,0,0],[0,1,0,0],[0,1,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,1,0,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,0,0,1],[0,1,1,0],[1,1,0,0],[1,1,0,0],[1,0,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[0,0,1,1],[1,0,1,0],[0,1,0,1],[1,1,1,0],[1,0,0,1],[0,0,1,1],[1,0,1,0],[1,0,0,1],[1,0,1,0],[0,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,1],[0,0,1,1],[1,0,1,1],[0,0,1,1],[0,0,1,0],[0,1,0,1],[1,0,1,0],[1,0,0,0],[0,1,0,1],[0,1,1,0],[0,1,0,0],[0,1,0,1],[0,1,1,0],[1,1,0,1],[0,0,1,1],[1,0,1,0],[1,1,0,1],[0,0,1,1],[0,0,1,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[1,1,0,0],[1,1,0,1],[1,0,1,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,1,1,0],[1,0,0,0],[0,1,0,1],[0,0,1,1],[1,1,1,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[0,1,0,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[0,0,1,0],[1,0,0,1],[0,1,1,1],[0,1,1,0],[1,1,0,0],[0,1,0,1],[1,0,1,0],[0,1,0,0],[1,1,0,0],[1,1,0,0],[0,1,0,1],[0,0,1,1],[1,0,1,0],[1,0,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[1,1,0,0],[0,1,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,1,0,1],[0,1,1,0],[0,1,0,1],[0,0,1,1],[0,1,1,1],[0,1,1,0],[0,1,0,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,0],[1,1,0,0],[1,1,0,0],[0,0,0,1],[1,0,1,0],[1,1,0,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[0,1,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[1,1,0,0],[0,1,0,1],[0,0,1,1],[0,1,1,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[1,0,1,0],[1,0,0,1],[0,1,1,0],[0,1,0,1],[1,1,1,0],[1,1,0,0],[1,0,0,1],[1,0,1,0],[1,0,0,1],[1,0,1,0],[0,1,0,0],[1,1,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[1,0,1,1],[1,0,1,0],[1,0,0,0],[1,0,0,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[0,0,1,1],[1,0,1,1],[1,0,1,0]]),v=(a(20),function(){return n.a.createElement("div",{className:"map"},f.map(function(e,t){return n.a.createElement("div",{key:t,className:"block",style:{borderTopColor:e[0]?"transparent":"white",borderBottomColor:e[1]?"transparent":"white",borderLeftColor:e[2]?"transparent":"white",borderRightColor:e[3]?"transparent":"white"}})}))});var p=function(e){var t=e.score,a=e.title,r=e.hp,s=e.status;return n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"left"},n.a.createElement("div",null,"Score"),n.a.createElement("div",null,function(e){return String(e).length<5?Array(5-String(e).length).fill().map(function(e){return"0"}).join("")+e:e}(t))),n.a.createElement("div",{className:"right"},n.a.createElement("div",null,"HP"),n.a.createElement("div",null,Array(r).fill().map(function(e){return"x"}))),n.a.createElement("div",null,a),n.a.createElement("div",null,"gameOver"===s?"Game Over":""))},d=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={player:{x:Math.floor(8*Math.random()),y:Math.floor(8*Math.random())},monster:{x:Math.floor(8*Math.random())+8,y:Math.floor(8*Math.random())+8},items:[],key:"",score:0,hp:5,status:"start"},a.changeKey=function(e){var t=e.key;"Enter"===t?(a.action(),a.setState({key:""})):"wsadefq".includes(t)&&a.setState({key:t})},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keypress",this.changeKey)}},{key:"action",value:function(){switch(this.monsterAttack(),this.state.key){case"e":this.pick();break;case"f":this.attack();break;case"w":case"s":case"a":case"d":this.movePlayer()}this.moveMonster()}},{key:"monsterAttack",value:function(){var e=this.state,t=e.hp,a=e.monster,r=e.player,n=e.key;a.x===r.x&&a.y===r.y&&"f"!==n&&(t>2?this.setState({hp:t-2}):this.setState({hp:0,status:"gameOver"}))}},{key:"moveMonster",value:function(){var e=function e(t,a,r,n){if(5===a)return!1;if(n.x===t.x&&n.y===t.y)return t;for(var s=0;s<4;s++)if((1^r)!==s&&b(t,s)){var i=Object(o.a)({},t);switch(s){case 0:i.y-=1;break;case 1:i.y+=1;break;case 2:i.x-=1;break;case 3:i.x+=1}if(e(i,a+1,s,n))return i}return!1}(this.state.monster,0,42,this.state.player);e&&this.setState({monster:e})}},{key:"movePlayer",value:function(){var e=this.state,t=e.player,a=e.key,r=Object(o.a)({},t),n="wsad".indexOf(a);if(!b(r,n))return alert("Boom!");switch(n){case 0:r.y-=1;break;case 1:r.y+=1;break;case 2:r.x-=1;break;case 3:r.x+=1}this.setState({player:r})}},{key:"attack",value:function(){if(this.state.player.x===this.state.monster.x&&this.state.player.y===this.state.monster.y){var e={x:Math.floor(16*Math.random()),y:Math.floor(16*Math.random())};this.setState({monster:e,items:[].concat(Object(c.a)(this.state.items),[Object(o.a)({},this.state.player)]),score:this.state.score+1})}else alert("Boom!")}},{key:"pick",value:function(){var e=this,t=-1;if(this.state.items.forEach(function(a,r){var n=a.x,s=a.y;n===e.state.player.x&&s===e.state.player.y&&(t=r)}),-1!==t){var a=this.state.items.filter(function(e,a){return a!==t}),r=this.state.hp;r=5===r?5:r+1,this.setState({items:a,hp:r})}else alert("Boom!")}},{key:"renderItems",value:function(){return this.state.items.map(function(e,t){return n.a.createElement(k,Object.assign({key:t},e,{c:"i"}))})}},{key:"renderMonster",value:function(){var e="M";return this.state.player.x===this.state.monster.x&&this.state.player.y===this.state.monster.y&&(e="B"),n.a.createElement(k,Object.assign({c:e},this.state.monster))}},{key:"renderPlayer",value:function(){var e=this,t="O";return this.state.items.find(function(t){return t.x===e.state.player.x&&t.y===e.state.player.y})&&(t="G"),n.a.createElement(k,Object.assign({c:t},this.state.player))}},{key:"render",value:function(){var e=this;return"gameOver"===this.state.status&&window.removeEventListener("keypress",this.changeKey),n.a.createElement("div",{className:"App",ref:function(t){return e.game=t}},n.a.createElement(p,{title:"Dungeons v1.0.1",score:this.state.score,hp:this.state.hp,status:this.state.status}),this.renderItems(),this.renderPlayer(),this.renderMonster(),n.a.createElement(v,null),n.a.createElement("div",{className:"key"},"[>] action: ".concat(this.state.key)))}}]),t}(r.Component),k=function(e){var t=e.x,a=e.y,r=e.c;return n.a.createElement("div",{style:{transform:"translate(".concat(50*t,"px,").concat(50*a,"px)")},className:"item"},r)};function b(e,t){return!!f[e.x+16*e.y][t]}var x=d;i.a.render(n.a.createElement(x,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.1aebeb19.chunk.js.map